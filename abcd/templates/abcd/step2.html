{% extends "abcd/stepbase.html" %}

{% block header_files %}
<style>
  body {
    background-color: #4EE4C3;
    /* background-image: url('../../static/abcd/img/step2.svg'); */
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: bottom;  
    background-size: 80vw auto;
  }
  
</style>
{% endblock %}

{% block content %}
<div class="col">
  <div class="row">
    <h1>Who are the individuals?</h1>
  </div>
  <div class="row">
  <div class="container">
    
    <form method="post" id="addIndividualForm" onsubmit = "return true;">
    <div class="form-group">
    {% csrf_token %}
      <label>Stakeholder's name</label>
      <input type="text" class="form-control" name="individual_name" placeholder="Enter stakeholder's name">
    </div>
    <div class="form-group">
      <label class="d-block">Strengths</label>
      <div class="d-flex">
      <input type="text" class="form-control" name="individual_strengths" placeholder="Enter strengths">
      <button class="btn btn-secondary" value=add>Add</button>
      </div>
    </div>
    <div class="form-group">
      <label class="d-block">Interests</label>
      <div class="d-flex">
        <input type="text" class="form-control" name="individual_interests" placeholder="Enter interests">
        <button class="btn btn-secondary" value=add>Add</button>
      </div>
    </div>
    <div class="form-group">
      <label class="d-block">Qualities</label>
      <div class="d-flex">
        <input type="text" class="form-control" name="individual_qualities" placeholder="Enter qualities">
       <button class="btn btn-secondary" value=add>Add</button>
      </div>
    </div>
    <button class="btn btn-primary" type="submit" value=add>Add Stakeholder</button>
    </form>
    <!-- <form action="" method="POST" >
    {% csrf_token %}
    {{ form2.as_p }}
    <button name="htmlsubmitbutton2" class="btn">Add</button>
    </form> -->

  
  </div>
  {% for s in individuals %}
    <li class="list-group-item">
      <p class="font-weight-bold">{{institution.name}}</p>
      <p>{{s.name}}</p>
      <button onclick="deleteStakeholder('{{s.id}}')">Delete</button>
    </li>
    {% endfor %}
</div>
</div>

{% endblock %}

{% block js %}
<script>
  $('<img/>').attr('src', "../../static/abcd/img/step2.svg").on('load', function() {
   $(this).remove(); // prevent memory leaks as @benweet suggested
   $('body').css('background-image', 'url("../../static/abcd/img/step2.svg")');
});

function deleteStakeholder(id) {
  $.ajax({
            url: "/individuals/",
            type: 'DELETE',
            async: false,
            data: {'id': id},
            success:function(data) {
              location.reload();
            }
        });
        return true;
}
</script>
{% endblock %}